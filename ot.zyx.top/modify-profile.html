<!DOCTYPE html>
<html lang="zh-cn">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>更改个人信息 - 在线加密系统</title>

	<script type="text/javascript">
		uojHome = ''; // 'https://sjzezoj.com/';
	</script>

	<!-- Bootstrap 5 (CSS) -->
	<link rel="stylesheet" href="https://sjzezoj.com/css/bootstrap.min.css?v=5.3.0-alpha3" />	<!-- Bootstrap Icons -->
	<link rel="stylesheet" href="https://sjzezoj.com/css/bootstrap-icons.min.css?v=2022.9.23" />
	<!-- Custom styles for this template -->
	<link rel="stylesheet" href="https://sjzezoj.com/css/uoj-bs5.css?v=d627490" />
	<!-- jQuery (necessary for Bootstrap\'s JavaScript plugins) -->
	<script src="https://sjzezoj.com/js/jquery.min.js"></script>
	<!-- jQuery autosize -->
	<script src="https://sjzezoj.com/js/jquery.autosize.min.js"></script>	<script type="text/javascript">
		$(document).ready(function() {
			$('textarea:not([data-no-autosize])').autosize();
		});
	</script>

	<!-- jQuery cookie -->
	<script src="https://sjzezoj.com/js/jquery.cookie.min.js"></script>
	<!-- Bootstrap 5: JavaScript -->
	<script src="https://sjzezoj.com/js/bootstrap.bundle.min.js?v=5.3.0-alpha3"></script>
	<!-- Color converter -->
	<script src="https://sjzezoj.com/js/color-converter.min.js"></script>
	<!-- Clipboard Polyfill -->
	<script src="https://sjzezoj.com/js/clipboard-polyfill.overwrite-globals.es5.min.js"></script>
	<!-- uoj -->
	<script src="https://sjzezoj.com/js/uoj.js?v=d627490"></script>
	<!-- readmore -->
	<script src="https://sjzezoj.com/js/readmore/readmore.min.js"></script>
	<!-- LAB -->
	<script src="https://sjzezoj.com/js/LAB.min.js"></script>
	
	
	
	
	
	
	
	
	
	
	
	
	
	<link rel="stylesheet" href="https://sjzezoj.com/css/highlightjs.github.min.css?v=11.6.0-20230223" />		<script src="https://sjzezoj.com/js/highlightjs.min.js?v=11.6.0-20221005"></script>		<script>
			$(document).ready(function() {
				hljs.highlightAll();
			});
		</script>
	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

	<script type="text/javascript">
		before_window_unload_message = null;
		$(window).on('beforeunload', function() {
			if (before_window_unload_message !== null) {
				return before_window_unload_message;
			}
		});
	</script>

	<script async data-domain="sjzezoj.com" src="https://stat.u.sb/js/script.js"></script>
	<script>
		window.plausible = window.plausible || function() {
			(window.plausible.q = window.plausible.q || []).push(arguments)
		}
	</script>
	<script>
		plausible('Domain', {
			props: {
				domain: window.location.host,
			},
		});
	</script>
</head>

<body class="d-flex flex-column min-vh-100
			bg-body-tertiary
			">
			<div class="navbar navbar-light navbar-expand-md bg-body shadow-sm
mb-4
" role="navigation">
	<div class="container">
		<a class="navbar-brand fw-normal" href="../ot.zyx.top.html">
			zyxOT		</a>

		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="nav navbar-nav mr-auto" id="navbarSupportedContent-dock">
				<li class="nav-item">
					<a class="nav-link" href="../ot.zyx.top/main.html">
						<i class="bi bi-card-list"></i>
						加密					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../ot.zyx.top/submit.html">
						<i class="bi bi-pencil-square"></i>
						投食					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="../ot.zyx.top/faq.html">
						<i class="bi bi-question-circle"></i>
						帮助					</a>
				</li>
			</ul>

			<hr class="d-md-none text-muted">

			<ul class="nav navbar-nav ms-md-auto">
	<li class="nav-item dropdown">
		<button class="btn btn-link nav-link py-2 px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static">
			<i class="bi bi-circle-half theme-icon-active" data-icon="bi-circle-half"></i>
			<span class="d-md-none">&nbsp;切换主题</span>
		</button>
		<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme" style="--bs-dropdown-min-width: 6rem;">
			<li>
				<button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto">
					<i class="bi bi-circle-half me-2 opacity-50 theme-icon" data-icon="bi-circle-half"></i>
					系统
				</button>
			</li>
			<li>
				<button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light">
					<i class="bi bi-sun-fill me-2 opacity-50 theme-icon" data-icon="bi-sun-fill"></i>
					亮色
				</button>
			</li>
			<li>
				<button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark">
					<i class="bi bi-moon-stars-fill me-2 opacity-50 theme-icon" data-icon="bi-moon-stars-fill"></i>
					暗色
				</button>
			</li>
		</ul>
	</li>
	<li class="nav-item dropdown">
		<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
			<i class="bi bi-translate"></i>
			中文		</a>
		<ul class="dropdown-menu">
			<li>
				<a class="dropdown-item" href="?locale=zh-cn">
					中文
				</a>
			</li>
		</ul>
	</li>
	<li class="nav-item dropdown">
		<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" id="uoj_username_a">
			<span id="uoj_username_page"></span> 						</a>
		<ul class="dropdown-menu">
			<li>
				<a class="dropdown-item" id="my_chat">个人信息</a>
			</li>
		</ul>
	</li>
					<li id="login" class="nav-item" role="presentation"><a class="nav-link" href="../ot.zyx.top/login.html">
				<i class="bi bi-box-arrow-in-right"></i>
				登录			</a>
					<li id="logout" class="nav-item" role="presentation"><a class="nav-link" href="../ot.zyx.top/logout.html">登出</a></li>
								</ul><script type="text/javascript">
							var uoj_username = localStorage.getItem("zyxOT-v1-username");
							if (uoj_username != null) {
								document.querySelector("#uoj_username_page").innerHTML = uoj_username;
								document.querySelector("#my_chat").href = "../ot.zyx.top/user.html?" + uoj_username;
								document.querySelector("#login").remove();
							}
							else {
								document.querySelector("#uoj_username_a").remove();
								document.querySelector("#logout").remove();
							}
						</script>
			</ul>
		</div>

	</div>
</div>

<script>
	var zan_link = '';

	var this_id;
	this_id = localStorage.getItem("zyxOT-v1-username");
</script>
	
	<div class="uoj-content container flex-fill">


<div class="row">
	<div class="col-md-3">
		<div class="list-group">								
					<a href="javascript:default()" class="list-group-item list-group-item-action active" id="button-default">
    				更改个人信息
  				</a>
				</div>
		<div class="list-group">								
					<a href="manage-user.html" class="list-group-item" style="border: none; background: none; color: rgba(var(--bs-link-color-rgb), var(--bs-link-opacity, 1));" id="button-manage">
    				用户后台
    				<script>
    					if ((localStorage.getItem("zyxOT-v1-username") == null && localStorage.getItem("zyxOT-v1-guest-secret") != "true") || (localStorage.getItem("zyxOT-v1-username") != null && localStorage.getItem("zyxOT-v1-user=" + localStorage.getItem("zyxOT-v1-username") + "?manage") != 1 && localStorage.getItem("zyxOT-v1-default-secret") != "true")) {
    						document.querySelector('#button-manage').style = 'border: none; background: none; --bs-nav-link-disabled-color: var(--bs-secondary-color); pointer-events: none; ';
    						document.querySelector('#button-manage').disabled = true;
    						document.querySelector('#button-manage').href = '';
    					}
    				</script>
  				</a>
				</div>
	</div>
	<div class="col-md-9 mt-2 mt-md-0">
		<form id="form-update" class="form-horizontal">
	<h4>请输入您的密码进行身份验证</h4>
	<div id="div-old_password" class="form-group">
		<label for="input-old_password" class="col-sm-2 control-label">密码</label>
		<input type="password" class="form-control" name="old_password" id="input-old_password" placeholder="输入密码" maxlength="20" />
		<span class="help-block text-danger" id="help-old_password"></span>
	</div>
	<hr>
	<h4>请输入新的个人信息</h4>
	<div id="div-password" class="form-group">
		<label for="input-old_password" class="col-sm-2 control-label">密码</label>
		<input type="password" class="form-control" name="new_password" id="input-new_password" placeholder="输入新密码" maxlength="20" />
		<input type="password" class="form-control top-buffer-sm" name="new_password" id="input-new_password-again" placeholder="重新输入新密码" maxlength="20" />
		<span class="help-block text-danger" id="help-new_password"></span>
	</div>
	<div id="div-password" class="form-group">
		<label for="input-old_password" class="col-sm-2 control-label">用户名颜色</label>
		<select class="form-control" id="input-contestrules" name="contestrules" style="width: 100%; font-family: 'Consolas'; margin-top: 5px;">
        <option>auto</option>
        <option>red</option>
        <option>orange</option>
        <option>pink</option>
        <option>blue</option>
        <option>green</option>
        <option>cyan</option>
        <script>
        	if (localStorage.getItem("zyxOT-v1-user=" + uoj_username + "?manage") == 1) 
        		document.write('<option>purple</option>');
        </script>
        </select>
		<span class="help-block text-danger" id="help-contestrules"></span>
	</div>
	<div class="form-group">
		<div class="col-sm-offset-2 col-sm-3">
			<button type="submit" id="button-submit" class="btn btn-secondary">提交</button>
			<button id="button-submit" class="btn btn-danger" onclick="remove_user();">注销账号</button>
		</div>
	</div>
	<script type="text/javascript">
	function refreshCaptcha() {
		$("#captcha").attr("src", '?');
	}

	function getFormErrorAndShow(type, t) {
		if (type == 'password') {
			if (t.length < 6 && t.length != 0) {
				$('#help-new_password').html('密码长度不应小于6。');
				return false;
			}
			else 
				return true;
		}
		else if (type == 'usernameColor') {
			if (t != "auto" && t != 'red' && t != 'orange' && t != 'pink' && t != 'blue' && t != 'green' && t != 'cyan' && localStorage.getItem("zyxOT-v1-user=" + uoj_username + "?manage") == null) {
				$('#help-contestrules').html('您无权选择该颜色。');
				return false;
			}
			else if (t != "auto" && t != 'red' && t != 'orange' && t != 'pink' && t != 'blue' && t != 'green' && t != 'cyan' && t != 'purple' && localStorage.getItem("zyxOT-v1-user=" + uoj_username + "?manage") == 1) {
				$('#help-contestrules').html('您无权选择该颜色。');
				return false;
			}
			else 
				return true;
		}
	}

	function validateLoginPost() {
		$('#input-old_password, #input-new_password, #input-new_password-again').removeClass('is-invalid');
		$('#help-old_password, #help-new_password, #help-contestrules').html('');
		var ok = true;
		ok &= getFormErrorAndShow('password', $('#input-new_password').val());
		ok &= getFormErrorAndShow('password', $('#input-new_password-again').val());
		if (ok && $('#input-new_password').val() != $('#input-new_password-again').val()) {
			$('#help-new_password').html('两次输入的密码不一致。');
			ok = 0;
		}
		var selectElement = document.querySelector("#input-contestrules");
		var selectedIndex = selectElement.selectedIndex;
		var newcontestrules = selectElement.options[selectedIndex].text;
		ok = getFormErrorAndShow("usernameColor", newcontestrules) & ok;
		return ok;
	}

	function hash(s) {
		var ans = 0;
		for (var i = 0; i < s.length; i++) {
			ans += s[i].charCodeAt() * 130;
			ans %= 998244353;
		}
		return ans;
	}

	function getuserwrong() {
		$('#input-old_password, #input-new_password, #input-new_password-again').removeClass('is-invalid');
		$('#help-old_password, #help-new_password, #help-contestrules').html('');
		var this_hack = hash(document.getElementById("input-old_password").value);
		if (this_hack != localStorage.getItem("zyxOT-v1-user=" + uoj_username + "?password")) {
			$('#help-old_password').html('原密码错误。');
			return false;
		}
		else {
			if (document.getElementById("input-new_password").value != "") {
				localStorage.setItem("zyxOT-v1-user=" + uoj_username + "?password", hash(document.getElementById("input-new_password").value));
			}
			var selectElement = document.querySelector("#input-contestrules");
			var selectedIndex = selectElement.selectedIndex;
			var newcontestrules = selectElement.options[selectedIndex].text;
			if (newcontestrules != 'auto') {
				localStorage.setItem("zyxOT-v1-user=" + uoj_username + "?color", newcontestrules);
			}
			alert("更改成功");
			return true;
		}
	}

	function submitLoginPost() {
		if (!validateLoginPost() || !getuserwrong()) {
			refreshCaptcha();
			return false;
		}
		return true;
	}

	$(document).ready(function() {
		refreshCaptcha();

		$('#form-update').submit(function(e) {
			e.preventDefault();
			submitLoginPost();
		});
	});
	</script>
</form>
		</div>
</div>

</div>
	<script>
	if (localStorage.getItem("zyxOT-v1-username") == null) {
		document.querySelector("title").innerHTML = "403 - 在线加密系统";
		document.querySelector(".uoj-content").innerHTML = '<div class="text-center"><div style="font-size:233px">403</div><p>禁止入内！ T_T</p></div>			';
	}
	</script>
	<footer class="bg-body text-muted pt-3 pb-4 mt-4" style="font-size: 0.9em">
		<div class="container d-lg-flex justify-content-lg-between">
			<div>
				<div>
					&copy; 2025					<a class="text-decoration-none" href="../ot.zyx.top.html">zyxOT</a>
				</div>
				<div class="small mt-1" id="web-time">
					服务器时间: 2025-08-23 14:00:45				</div>
			</div>
			<div class="mt-2 mt-lg-0">
				Based on <a class="text-decoration-none" href="https://uoj.ac" target="_blank">UOJ</a> &
				<a class="text-decoration-none" href="https://sjzezoj.com" target="_blank">S2OJ</a>,
				modified by <a class="text-decoration-none" href="../ot.zyx.top/user.html?zhangyunxiang" target="_blank">zhangyunxiang</a> & <a class="text-decoration-none" href="../ot.zyx.top/user.html?Hussein" target="_blank">Hussein</a>
				for <a class="text-decoration-none" href="../ot.zyx.top.html" target="_blank">zyxOT</a>
			</div>
		</div>
		<script src="../ot.zyx.top/js/system.js"></script>
	</footer>
</div>
<!-- /container -->
</body>

</html>